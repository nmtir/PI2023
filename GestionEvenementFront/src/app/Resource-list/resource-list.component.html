<app-current-user></app-current-user>
<main *ngIf="stock&&logistique&&products" class="main-content position-relative border-radius-lg ">
  <div class="container-fluid py-4">
    <div class="row mt-4">
      <div  class="col-lg-7 mb-lg-0 mb-4">

          <div class="card-header pb-0 p-3">
            <div style="display: flex;justify-content: space-between;"class="d-flex justify-content-between">
              <h6 class="mb-2">Event Inventory</h6>
              <h6 class="mb-2">Total: {{logistique.depenses}} tnd</h6>
            </div>
          </div>
            <div
              style="align-items: center"
                   cdkDropList
                   #eventProducts="cdkDropList"
                   [cdkDropListData]=products
                   [cdkDropListConnectedTo]="[stockList]"
                   (cdkDropListDropped)="drop($event)"
                   [cdkDropListEnterPredicate]="alreadyPredicate">
              <ul class="center">
                <li class="d-flex ">

                    <span class="span-wrapper-head border rounded-pill ">
                      <h6>Name</h6>
                    </span>
                  <span class="span-wrapper-head border rounded-pill ">
                      <h6>Unit Price</h6>
                    </span>
                  <span class="span-wrapper-head border rounded-pill">
                    <h6>Quantity</h6>
                    </span>
                  <span  class="span-wrapper-head border  rounded-pill">
                    <h6>Total</h6>
                    </span>
                  <span  class="span-wrapper-head border  rounded-pill">
                    <h6>Remove</h6>
                    </span>
                </li>
              </ul>
              <ul class="example-box rounded center" *ngFor="let r of products" cdkDrag [cdkDragData]="r">
                <div></div>
                <li class="d-flex ">

                    <span class="span-wrapper center  border  rounded-pill">
                      <h6>{{r.nameProduct}}</h6>
                    </span>
                    <span class="span-wrapper center border  rounded-pill">
                      <h6>{{r.price}}&nbsp;tnd</h6>
                    </span>
                    <span class="span-wrapper border  rounded-pill">
                    <input [(ngModel)]="r.quantity"  value="{{r.quantity}}" type="number" style="text-align: center;width: 100px;border-radius: 0;border: none;font-size: 20px" class=" center form-control" />
                    </span>
                    <span class="span-wrapper center  border  rounded-pill">
                      <h6>{{r.quantity*r.price}}&nbsp;tnd</h6>
                    </span>
                  <span style="cursor: pointer; " class="span-wrapper center  border  rounded-pill">
                      <img (click)="remove(r)"  width="20px" height="auto" src="assets/images/delete.png">
                  </span>
                </li>
              </ul>

            </div>
        <br>
        <br>
          <div class="row">
            <div class="d-flex align-items-center">
              <p class="mb-0"></p>
              <button class="btn btn-primary btn-sm ms-auto" (click)="SaveOrders();">Save</button>
            </div>
          </div>


      </div>

      <div class="col-lg-5">
        <div class="card">
          <div class="card-header pb-0 p-3">
            <h6 class="mb-0">Stock</h6>
          </div>
          <div cdkDropList
               #stockList="cdkDropList"
               [cdkDropListData]=stock
               [cdkDropListConnectedTo]="[eventProducts]"
               (cdkDropListDropped)="drop($event)"
               [cdkDropListEnterPredicate]="noReturnPredicate"
               class="card-body p-3">
            <ul class="example-box" *ngFor="let r of stock" cdkDrag [cdkDragData]="r" class="list-group">

              <li class="list-group-item border-0 d-flex justify-content-between ps-0 mb-2 border-radius-lg">
                <div class="d-flex align-items-center">
                  <div class="d-flex flex-column">
                    <h6 class="mb-1 text-dark text-sm">{{r.nameProduct}}</h6>
                    <span class="text-xs">{{r.stock}} in stock</span>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <footer class="footer pt-3  ">
      <div class="container-fluid">
        <div class="row align-items-center justify-content-lg-between">
          <div class="col-lg-6 mb-lg-0 mb-4">
            <div class="copyright text-center text-sm text-muted text-lg-start">
            </div>
          </div>
          <div class="col-lg-6">
            <ul class="nav nav-footer justify-content-center justify-content-lg-end">
            </ul>
          </div>
        </div>
      </div>
    </footer>
  </div>
</main>
